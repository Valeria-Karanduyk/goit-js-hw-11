{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function fetchData(inputSearch) {\n  const searchParams = new URLSearchParams({\n    key: '46020847-b0dc78394505c5145868b7f5c',\n    q: `${inputSearch}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  return fetch(`https://pixabay.com/api/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n","export function renderData(dataImgArr, userListEl) {\n  const markup = dataImgArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-list-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"img\" src=\"${webformatURL}\" \n                        alt=\"${tags}\" \n                        title=\"${tags}\" />\n                    </a>\n                    <ul class=\"data-list\">\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Likes</p>\n                            <p class=\"data-numbers\">${likes}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Views</p>\n                            <p class=\"data-numbers\">${views}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Comments</p>\n                            <p class=\"data-numbers\">${comments}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Downloads</p>\n                            <p class=\"data-numbers\">${downloads}</p>\n                        </li>\n                    </ul> \n          </li>`;\n      }\n    )\n    .join('');\n\n  userListEl.insertAdjacentHTML('beforeend', markup);\n}\n","const bodySelect = document.querySelector('body');\nconst firstHtml = `<div class=\"container\">\n    <form class=\"formFetchEl\">\n\t\t<input type=\"text\" class=\"search-input\" name=\"search\" />\n\t\t<button class=\"btnEl\">Search</button>\n    </form>\n    <span class=\"loader\">Loading</span>\n\t  <ul class=\"galleryEl\"></ul>\n</div>`;\n\nbodySelect.insertAdjacentHTML('afterbegin', firstHtml);\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.galleryEl a', {\n  caption: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nimport { fetchData } from './js/pixabay-api.js';\nimport { renderData } from './js/render-functions.js';\n\nconst fetchUserForm = document.querySelector('form');\nconst userList = document.querySelector('.galleryEl');\n\nfetchUserForm.addEventListener('submit', event => {\n  event.preventDefault();\n  userList.innerHTML = '';\n\n  const thisInputSearch = event.currentTarget.elements.search.value\n    .toLowerCase()\n    .trim();\n\n  if (!thisInputSearch) {\n    return;\n  }\n\n  fetchData(thisInputSearch)\n    .then(comingsImg => {\n      if (comingsImg.hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching <br> your search query. Please try again!',\n          messageColor: '#000',\n          messageSize: '18px',\n          messageLineHeight: '20px',\n          backgroundColor: 'rgb(255,153,102)',\n          position: 'topRight',\n          iconUrl: iconUrl,\n          imageWidth: 30,\n        });\n        const iziToastElStyle = document.querySelector('.iziToast');\n        iziToastElStyle.style.borderRadius = '10px';\n        iziToastElStyle.style.overflow = 'hidden';\n      } else {\n        loader.style.display = 'block';\n        renderData(comingsImg.hits, userList);\n\n        gallery.refresh();\n        const images = userList.querySelectorAll('img');\n        let loadedImagesCount = 0;\n\n        images.forEach(img => {\n          if (img.complete) {\n            loadedImagesCount++;\n            if (loadedImagesCount === images.length) {\n              loader.style.display = 'none';\n            }\n          } else {\n            img.addEventListener('load', () => {\n              loadedImagesCount++;\n              if (loadedImagesCount === images.length) {\n                loader.style.display = 'none';\n              }\n            });\n          }\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        message: `Sorry, ${error}. Please try again!`,\n        messageColor: '#000',\n        messageSize: '18px',\n        messageLineHeight: '20px',\n        backgroundColor: 'rgb(255,153,102)',\n        position: 'topRight',\n      });\n      loader.style.display = 'none';\n      const iziToastElStyle = document.querySelector('.iziToast');\n      iziToastElStyle.style.borderRadius = '10px';\n      iziToastElStyle.style.overflow = 'hidden';\n    });\n});\n"],"names":["fetchData","inputSearch","searchParams","response","renderData","dataImgArr","userListEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","bodySelect","firstHtml","loader","gallery","SimpleLightbox","fetchUserForm","userList","event","thisInputSearch","comingsImg","iziToast","iziToastElStyle","images","loadedImagesCount","img","error"],"mappings":"6vBAAO,SAASA,EAAUC,EAAa,CACrC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAG,GAAGD,CAAW,GACjB,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACD,OAAO,MAAM,4BAA4BC,CAAY,EAAE,EAAE,KAAKC,GAAY,CACxE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CCdO,SAASC,EAAWC,EAAYC,EAAY,CACjD,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,oDACqCL,CAAa;AAAA,gDACjBD,CAAY;AAAA,+BAC7BE,CAAI;AAAA,iCACFA,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sDAKiBC,CAAK;AAAA;AAAA;AAAA;AAAA,sDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sDAIRC,CAAS;AAAA;AAAA;AAAA,gBAK1D,EACA,KAAK,EAAE,EAEVR,EAAW,mBAAmB,YAAaC,CAAM,CACnD,CC1CA,MAAMQ,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASlBD,EAAW,mBAAmB,aAAcC,CAAS,EACrD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAQvB,IAAIC,EAAU,IAAIC,EAAe,eAAgB,CAC/C,QAAS,GACT,aAAc,IACd,aAAc,KAChB,CAAC,EAKD,MAAMC,EAAgB,SAAS,cAAc,MAAM,EAC7CC,EAAW,SAAS,cAAc,YAAY,EAEpDD,EAAc,iBAAiB,SAAUE,GAAS,CAChDA,EAAM,eAAc,EACpBD,EAAS,UAAY,GAErB,MAAME,EAAkBD,EAAM,cAAc,SAAS,OAAO,MACzD,YAAa,EACb,OAEEC,GAILvB,EAAUuB,CAAe,EACtB,KAAKC,GAAc,CAClB,GAAIA,EAAW,KAAK,SAAW,EAAG,CAChCC,EAAS,KAAK,CACZ,QACE,gFACF,aAAc,OACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,mBACjB,SAAU,WACV,QACA,WAAY,EACtB,CAAS,EACD,MAAMC,EAAkB,SAAS,cAAc,WAAW,EAC1DA,EAAgB,MAAM,aAAe,OACrCA,EAAgB,MAAM,SAAW,QACzC,KAAa,CACLT,EAAO,MAAM,QAAU,QACvBb,EAAWoB,EAAW,KAAMH,CAAQ,EAEpCH,EAAQ,QAAO,EACf,MAAMS,EAASN,EAAS,iBAAiB,KAAK,EAC9C,IAAIO,EAAoB,EAExBD,EAAO,QAAQE,GAAO,CAChBA,EAAI,UACND,IACIA,IAAsBD,EAAO,SAC/BV,EAAO,MAAM,QAAU,SAGzBY,EAAI,iBAAiB,OAAQ,IAAM,CACjCD,IACIA,IAAsBD,EAAO,SAC/BV,EAAO,MAAM,QAAU,OAEvC,CAAa,CAEb,CAAS,CACF,CACP,CAAK,EACA,MAAMa,GAAS,CACdL,EAAS,KAAK,CACZ,QAAS,UAAUK,CAAK,sBACxB,aAAc,OACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,mBACjB,SAAU,UAClB,CAAO,EACDb,EAAO,MAAM,QAAU,OACvB,MAAMS,EAAkB,SAAS,cAAc,WAAW,EAC1DA,EAAgB,MAAM,aAAe,OACrCA,EAAgB,MAAM,SAAW,QACvC,CAAK,CACL,CAAC"}